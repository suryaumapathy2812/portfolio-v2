---
title: Rails - Securing Database Credentials
description: Securing credentials with environment variables
date: 2022-06-18
---

When it comes to any web application we build, there are a few things that we need to secure before making our application live. Things like Database Credentials, Constants, etc., must be secure so that only the people with the proper access can access it. Failing to hide the credentials could result in stranger gettings accessing our database and modifying or stealing datas.


Whenever push out code to version controlles like Github, Our is made public for other to access. While pushing out code to Github, we not make out code visible but also the credentials shared to millions of user in Github.


Ya we could make the repository Private, but is it the right solution? What if you want our code to be public with exposing the credentials? How do we hide these credentials from strangers?


Here comes out saviour "Environement variables"!  In Almost all of the code we would come across a file called .env. This is where we generally store our credentials. This .env file is not pushed to Github.


You may ask if the `.env` file is not pushed to Github how would could our project run with out the proper credentials. To solve the Github also has Environemnts where we can store these credentials


Let set up our `.env` in our project, to read from the .`env` we need to install a new gem into our project.  the gem we are going to use is called [dotenv](https://github.com/bkeepers/dotenv).


At the root of our rails project run the following command


```ruby
$ gem install dotenv
```


or we could open our `GEMFILE` and add the following line


```ruby
gem 'dotenv-rails', groups: [:development, :test, :production]
```


![Untitled.png](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/708b42e8-ec13-4dd7-a7dc-20464e74957b/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20230826%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20230826T173130Z&X-Amz-Expires=3600&X-Amz-Signature=f38c91e54d22f08d6dbf8285d3b62ddbcff590301c6ecb6c42eb238215d4f502&X-Amz-SignedHeaders=host&x-id=GetObject)


Now that we have added our gem lets create a `.env` at the root of the directory and paste the values inside the `.env` file


```ruby
# Replace the default values with our own credentials
# OUR_VARIABLE_NAME=value
DATABASE_HOST=localhost
DATABASE_USERNAME=root
DATABASE_PASSWORD=root
DATABASE_NAME=sample_db
```


![Untitled.png](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/797c6572-1fb9-4674-886a-3d696e969914/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20230826%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20230826T173130Z&X-Amz-Expires=3600&X-Amz-Signature=222618c1ae5d423576a78d67e2e8f69ad1925a455f222ddc2c547c121d2a983a&X-Amz-SignedHeaders=host&x-id=GetObject)


Now that our Gem and files are ready to access the values we use


```ruby
<%= ENV['OUR_VARIBALE_NAME'] %>
```


![Untitled.png](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/8257d11e-5cf2-4042-a5de-781feac6d572/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20230826%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20230826T173130Z&X-Amz-Expires=3600&X-Amz-Signature=4d059837cb3915398319feecec6c43f7d0d6b1d55484e80a4ac8882430b4b55b&X-Amz-SignedHeaders=host&x-id=GetObject)


thatâ€™s it before we start our app lets do a `bundle install` just to be sure if all the gem are installed.


```ruby
$ bundle install
$ rails s
```


Tip: add `.env` to the end of you `.gitignore` file, so that git ignores the `.env` file everytime you do `git add .` 


![Untitled.png](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/b40d8e6a-3b0a-47f5-84af-baaea027cbb0/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20230826%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20230826T173130Z&X-Amz-Expires=3600&X-Amz-Signature=63225984aef7007fe3fb381671155f24ac173c28c5039b0f0f8a3cba0e8ef562&X-Amz-SignedHeaders=host&x-id=GetObject)

